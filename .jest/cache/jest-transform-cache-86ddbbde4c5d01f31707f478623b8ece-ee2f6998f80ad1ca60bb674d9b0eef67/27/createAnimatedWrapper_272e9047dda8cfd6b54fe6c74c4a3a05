18cb614d572d7a29ee4d184c961dd770
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createAnimated = exports.createAnimatedWrapper = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _react = _interopRequireDefault(require("react"));

var _reactNative = require("react-native");

var _getRotationFromStyle = require("./getRotationFromStyle");

var _mergeStyles = require("./mergeStyles");

var createAnimatedWrapper = function createAnimatedWrapper(params) {
  var equalAspectRatio = params.equalAspectRatio === undefined ? true : params.equalAspectRatio;
  var nativeAnimatedComponent = params.nativeCached || createAnimated();
  var animatedComponent = params.cached || createAnimated();

  var flattenedStyle = _reactNative.StyleSheet.flatten(params.component.props.style);

  var nativeAnimatedStyles = getNativeAnimatableStyles(flattenedStyle);
  var animatedStyles = getAnimatableStyles(flattenedStyle);
  var componentStyles = getResolvedAspectRatio(equalAspectRatio, true, getComponentStyles(flattenedStyle));

  var innerElement = _react.default.createElement(params.component.type, (0, _objectSpread2.default)({}, params.component.props, {
    ref: params.innerRef,
    style: [componentStyles, getDebugBorder('#F00')]
  }));

  var additionalAnimatedStyles = {
    overflow: 'hidden'
  };

  if (nativeAnimatedStyles && nativeAnimatedStyles.position === 'absolute') {
    additionalAnimatedStyles.flex = 1;
  }

  var finalAnimatedStyles = [animatedStyles, params.styles, additionalAnimatedStyles, getDebugBorder('#0F0')];

  var animatedElement = _react.default.createElement(animatedComponent, {
    style: finalAnimatedStyles
  }, innerElement);

  var finalNativeAnimatedStyles = getResolvedRotation([].concat((0, _toConsumableArray2.default)(getStylesWithMergedTransforms([].concat((0, _toConsumableArray2.default)(params.nativeStyles ? params.nativeStyles : []), [nativeAnimatedStyles]))), [getDebugBorder('#00F'), params.overrideStyles]));
  var props = {
    collapsable: false,
    style: getResolvedAspectRatio(equalAspectRatio, false, finalNativeAnimatedStyles)
  };

  if (params.component.props.__index) {
    props = (0, _objectSpread2.default)({}, props, {
      index: parseInt(params.component.props.__index, 10)
    });
  }

  if (params.component.key) {
    props = (0, _objectSpread2.default)({}, props, {
      key: params.component.key
    });
  }

  if (params.component.ref) {
    props = (0, _objectSpread2.default)({}, props, {
      ref: params.component.ref
    });
  }

  if (params.component.onLayout) {
    props = (0, _objectSpread2.default)({}, props, {
      onLayout: params.component.onLayout
    });
  }

  var nativeAnimatedElement = _react.default.createElement(nativeAnimatedComponent, props, animatedElement);

  return nativeAnimatedElement;
};

exports.createAnimatedWrapper = createAnimatedWrapper;

var createAnimated = function createAnimated() {
  var wrapper = _react.default.createElement(_reactNative.View, null);

  return _reactNative.Animated.createAnimatedComponent(wrapper.type);
};

exports.createAnimated = createAnimated;

var getDebugBorder = function getDebugBorder() {
  return {};
};

var getResolvedAspectRatio = function getResolvedAspectRatio(equalAspectRatio, addFlex, style) {
  if (!style || equalAspectRatio) return style;
  var retVal = !(style instanceof Array) ? [(0, _objectSpread2.default)({}, style)] : style.map(function (s) {
    return (0, _objectSpread2.default)({}, s);
  });
  retVal.forEach(function (r) {
    delete r.width;
    delete r.height;
  });
  if (!addFlex) return retVal;
  return [].concat((0, _toConsumableArray2.default)(retVal), [{
    flex: 1
  }]);
};

var getResolvedRotation = function getResolvedRotation(styles) {
  var stylesCopy = styles.filter(function (i) {
    return i;
  }).map(function (s) {
    if (!s) return null;
    if (isNumber(s)) return s;
    var sc = (0, _objectSpread2.default)({}, s);

    if (sc.transform) {
      sc.transform = (0, _toConsumableArray2.default)(s.transform);
      sc.transform = sc.transform.map(function (t) {
        return (0, _objectSpread2.default)({}, t);
      });
    }

    return sc;
  });
  var a = new _reactNative.Animated.Value(0);
  stylesCopy.forEach(function (style) {
    if (style && style.transform) {
      var ri = (0, _getRotationFromStyle.getRotationFromStyle)(style);

      if (ri.rotate) {
        if (ri.rotate.rotate && typeof ri.rotate.rotate === 'string') {
          style.transform.find(function (t) {
            return Object.keys(t)[0] === 'rotate';
          }).rotate = a.interpolate({
            inputRange: [0, 1],
            outputRange: [ri.rotate.rotate, '0deg']
          });
        }

        if (ri.rotate.rotateX && typeof ri.rotate.rotateX === 'string') {
          style.transform.find(function (t) {
            return Object.keys(t)[0] === 'rotateX';
          }).rotateX = a.interpolate({
            inputRange: [0, 1],
            outputRange: [ri.rotateX.rotateX, '0deg']
          });
        }

        if (ri.rotate.rotateY && typeof ri.rotate.rotateY === 'string') {
          style.transform.find(function (t) {
            return Object.keys(t)[0] === 'rotateY';
          }).rotateY = a.interpolate({
            inputRange: [0, 1],
            outputRange: [ri.rotateY.rotateY, '0deg']
          });
        }
      }
    }
  });
  return stylesCopy;
};

var getStylesWithMergedTransforms = function getStylesWithMergedTransforms(styles) {
  var retVal = [];
  var transforms = [];

  if (styles) {
    styles.forEach(function (s) {
      if (s) {
        if (s.transform) {
          var t = s.transform;
          delete s.transform;
          t.forEach(function (ti) {
            if (!transforms.find(function (el) {
              return Object.keys(el)[0] === Object.keys(ti)[0];
            })) {
              transforms.push(ti);
            }
          });
        }

        retVal.push(s);
      }
    });
    retVal.push({
      transform: transforms
    });
    return retVal;
  }

  return styles;
};

var getNativeAnimatableStyles = function getNativeAnimatableStyles(styles) {
  return getFilteredStyle(styles, function (key) {
    return includePropsForNativeStyles.indexOf(key) > -1;
  });
};

var getAnimatableStyles = function getAnimatableStyles(styles) {
  return getFilteredStyle(styles, function (key) {
    return validStyles.indexOf(key) > -1 && excludePropsForStyles.indexOf(key) === -1;
  });
};

var getComponentStyles = function getComponentStyles(styles) {
  return getFilteredStyle(styles, function (key) {
    return excludePropsForComponent.indexOf(key) === -1;
  });
};

var getFilteredStyle = function getFilteredStyle(styles, shouldIncludeKey) {
  if (!styles) return styles;
  var flattenedStyle = styles;

  if (!(styles instanceof Object)) {
    flattenedStyle = _reactNative.StyleSheet.flatten(styles);
  }

  if (!flattenedStyle) return styles;

  if (!(flattenedStyle instanceof Array)) {
    flattenedStyle = [flattenedStyle];
  }

  var retVal = {};
  flattenedStyle.forEach(function (s) {
    if (s) {
      var keys = Object.keys(s);
      keys.forEach(function (key) {
        if (!isNumber(key) && shouldIncludeKey(key)) {
          retVal[key] = s[key];
        }
      });
    }
  });
  return retVal;
};

function isNumber(n) {
  return !Number.isNaN(parseFloat(n)) && !Number.isNaN(n - 0);
}

var paddingStyles = ['padding', 'paddingVertical', 'paddingHorizontal', 'paddingTop', 'paddingBottom', 'paddingLeft', 'paddingRight', 'paddingStart', 'paddingEnd'];
var marginStyles = ['margin', 'marginVertical', 'marginHorizontal', 'marginTop', 'marginBottom', 'marginLeft', 'marginRight', 'marginStart', 'marginEnd'];
var borderStyles = ['borderColor', 'borderTopColor', 'borderRightColor', 'borderBottomColor', 'borderLeftColor', 'borderStartColor', 'borderEndColor', 'borderRadius', 'borderTopLeftRadius', 'borderTopRightRadius', 'borderTopStartRadius', 'borderTopEndRadius', 'borderBottomLeftRadius', 'borderBottomRightRadius', 'borderBottomStartRadius', 'borderBottomEndRadius', 'borderStyle', 'borderWidth', 'borderLeftWidth', 'borderRightWidth', 'borderBottomWidth', 'borderTopWidth'];
var positionStyles = ['start', 'end', 'top', 'left', 'right', 'bottom', 'minWidth', 'maxWidth', 'minHeight', 'maxHeight'];
var shadowStyles = ['shadowColor', 'shadowOffset', 'shadowOpacity', 'shadowRadius', 'elevation'];
var excludePropsForComponent = [].concat(paddingStyles, marginStyles, borderStyles, positionStyles, shadowStyles, ['display', 'position', 'flexWrap', 'flexGrow', 'flexShrink', 'flexBasis', 'alignSelf', 'aspectRatio', 'zIndex', 'direction', 'transform', 'transformMatrix', 'decomposedMatrix', 'scaleX', 'scaleY', 'rotation', 'translateX', 'translateY', 'backfaceVisibility', 'backgroundColor']);
var includePropsForNativeStyles = [].concat(marginStyles, positionStyles, shadowStyles, ['display', 'width', 'height', 'position', 'flexDirection', 'flexWrap', 'flex', 'flexGrow', 'flexShrink', 'flexBasis', 'alignSelf', 'aspectRatio', 'zIndex', 'direction', 'transform']);
var excludePropsForStyles = [].concat(marginStyles, positionStyles, ['display', 'position', 'alignSelf', 'alignContent', 'overflow', 'flexGrow', 'flexShrink', 'flexBasis', 'aspectRatio', 'zIndex', 'direction', 'transform', 'transformMatrix', 'decomposedMatrix', 'scaleX', 'scaleY', 'rotation', 'translateX', 'translateY']);
var validStyles = ['display', 'width', 'height'].concat(positionStyles, marginStyles, paddingStyles, borderStyles, ['position', 'flexDirection', 'flexWrap', 'justifyContent', 'alignItems', 'alignSelf', 'alignContent', 'overflow', 'flex', 'flexGrow', 'flexShrink', 'flexBasis', 'aspectRatio', 'zIndex', 'direction', 'shadowColor', 'shadowOffset', 'shadowOpacity', 'shadowRadius', 'transform', 'transformMatrix', 'decomposedMatrix', 'scaleX', 'scaleY', 'rotation', 'translateX', 'translateY', 'backfaceVisibility', 'backgroundColor', 'opacity', 'elevation']);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZUFuaW1hdGVkV3JhcHBlci5qcyJdLCJuYW1lcyI6WyJjcmVhdGVBbmltYXRlZFdyYXBwZXIiLCJwYXJhbXMiLCJlcXVhbEFzcGVjdFJhdGlvIiwidW5kZWZpbmVkIiwibmF0aXZlQW5pbWF0ZWRDb21wb25lbnQiLCJuYXRpdmVDYWNoZWQiLCJjcmVhdGVBbmltYXRlZCIsImFuaW1hdGVkQ29tcG9uZW50IiwiY2FjaGVkIiwiZmxhdHRlbmVkU3R5bGUiLCJTdHlsZVNoZWV0IiwiZmxhdHRlbiIsImNvbXBvbmVudCIsInByb3BzIiwic3R5bGUiLCJuYXRpdmVBbmltYXRlZFN0eWxlcyIsImdldE5hdGl2ZUFuaW1hdGFibGVTdHlsZXMiLCJhbmltYXRlZFN0eWxlcyIsImdldEFuaW1hdGFibGVTdHlsZXMiLCJjb21wb25lbnRTdHlsZXMiLCJnZXRSZXNvbHZlZEFzcGVjdFJhdGlvIiwiZ2V0Q29tcG9uZW50U3R5bGVzIiwiaW5uZXJFbGVtZW50IiwiUmVhY3QiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsInJlZiIsImlubmVyUmVmIiwiZ2V0RGVidWdCb3JkZXIiLCJhZGRpdGlvbmFsQW5pbWF0ZWRTdHlsZXMiLCJvdmVyZmxvdyIsInBvc2l0aW9uIiwiZmxleCIsImZpbmFsQW5pbWF0ZWRTdHlsZXMiLCJzdHlsZXMiLCJhbmltYXRlZEVsZW1lbnQiLCJmaW5hbE5hdGl2ZUFuaW1hdGVkU3R5bGVzIiwiZ2V0UmVzb2x2ZWRSb3RhdGlvbiIsImdldFN0eWxlc1dpdGhNZXJnZWRUcmFuc2Zvcm1zIiwibmF0aXZlU3R5bGVzIiwib3ZlcnJpZGVTdHlsZXMiLCJjb2xsYXBzYWJsZSIsIl9faW5kZXgiLCJpbmRleCIsInBhcnNlSW50Iiwia2V5Iiwib25MYXlvdXQiLCJuYXRpdmVBbmltYXRlZEVsZW1lbnQiLCJ3cmFwcGVyIiwiQW5pbWF0ZWQiLCJjcmVhdGVBbmltYXRlZENvbXBvbmVudCIsImFkZEZsZXgiLCJyZXRWYWwiLCJBcnJheSIsIm1hcCIsInMiLCJmb3JFYWNoIiwiciIsIndpZHRoIiwiaGVpZ2h0Iiwic3R5bGVzQ29weSIsImZpbHRlciIsImkiLCJpc051bWJlciIsInNjIiwidHJhbnNmb3JtIiwidCIsImEiLCJWYWx1ZSIsInJpIiwicm90YXRlIiwiZmluZCIsIk9iamVjdCIsImtleXMiLCJpbnRlcnBvbGF0ZSIsImlucHV0UmFuZ2UiLCJvdXRwdXRSYW5nZSIsInJvdGF0ZVgiLCJyb3RhdGVZIiwidHJhbnNmb3JtcyIsInRpIiwiZWwiLCJwdXNoIiwiZ2V0RmlsdGVyZWRTdHlsZSIsImluY2x1ZGVQcm9wc0Zvck5hdGl2ZVN0eWxlcyIsImluZGV4T2YiLCJ2YWxpZFN0eWxlcyIsImV4Y2x1ZGVQcm9wc0ZvclN0eWxlcyIsImV4Y2x1ZGVQcm9wc0ZvckNvbXBvbmVudCIsInNob3VsZEluY2x1ZGVLZXkiLCJuIiwiTnVtYmVyIiwiaXNOYU4iLCJwYXJzZUZsb2F0IiwicGFkZGluZ1N0eWxlcyIsIm1hcmdpblN0eWxlcyIsImJvcmRlclN0eWxlcyIsInBvc2l0aW9uU3R5bGVzIiwic2hhZG93U3R5bGVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUVBOztBQUNBOztBQW1EQSxJQUFNQSxxQkFBcUIsR0FBRyxTQUF4QkEscUJBQXdCLENBQUNDLE1BQUQsRUFBd0I7QUFDcEQsTUFBTUMsZ0JBQWdCLEdBQUdELE1BQU0sQ0FBQ0MsZ0JBQVAsS0FBNEJDLFNBQTVCLEdBQXdDLElBQXhDLEdBQStDRixNQUFNLENBQUNDLGdCQUEvRTtBQUdBLE1BQU1FLHVCQUF1QixHQUFHSCxNQUFNLENBQUNJLFlBQVAsSUFBdUJDLGNBQWMsRUFBckU7QUFDQSxNQUFNQyxpQkFBaUIsR0FBR04sTUFBTSxDQUFDTyxNQUFQLElBQWlCRixjQUFjLEVBQXpEOztBQUdBLE1BQU1HLGNBQWMsR0FBR0Msd0JBQVdDLE9BQVgsQ0FBbUJWLE1BQU0sQ0FBQ1csU0FBUCxDQUFpQkMsS0FBakIsQ0FBdUJDLEtBQTFDLENBQXZCOztBQUdBLE1BQU1DLG9C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QTJCZixXQTNCZSxFQTRCZixpQkE1QmUsRUE2QmYsa0JBN0JlLEVBOEJmLFFBOUJlLEVBK0JmLFFBL0JlLEVBZ0NmLFVBaENlLEVBaUNmLFlBakNlLEVBa0NmLFlBbENlLEVBbUNmLG9CQW5DZSxFQW9DZixpQkFwQ2UsRUFxQ2YsU0FyQ2UsRUFzQ2YsV0F0Q2UsRUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVmlldywgQW5pbWF0ZWQsIFN0eWxlU2hlZXQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuXG5pbXBvcnQgeyBnZXRSb3RhdGlvbkZyb21TdHlsZSB9IGZyb20gJy4vZ2V0Um90YXRpb25Gcm9tU3R5bGUnO1xuaW1wb3J0IHsgbWVyZ2VTdHlsZXMgfSBmcm9tICcuL21lcmdlU3R5bGVzJztcbi8qXG4gIFRoaXMgSE9DIHdyYXBwZXIgY3JlYXRlcyBhbmltYXRhYmxlIHdyYXBwZXJzIGFyb3VuZCB0aGUgcHJvdmlkZWQgY29tcG9uZW50XG4gIHRvIG1ha2UgaXQgYW5pbWF0YWJsZSAtIGluZGVwZW5kZW50IG9mIHdldGhlciBpdCBpcyBhIHN0YXRlbGVzcyBvciBjbGFzc1xuICBjb21wb25lbnQuXG5cbiAgSW4gYWRkaXRpb24gaXQgd3JhcHMgdGhlIGVsZW1lbnQgaW4gdHdvIG91dGVyIGFuaW1hdGFibGUgY29tcG9uZW50cyAtIG9uZVxuICBmb3IgdHJhbnNmb3JtIGFuaW1hdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHRoZSBuYXRpdmUgZHJpdmVyLCBhbmQgb25lXG4gIGZvciBvdGhlciBwcm9wZXJ0aWVzIHRoYXQgY2FuIGJlIGFuaW1hdGVkIHVzaW5nIGEgbm9uLW5hdGl2ZSBhbmltYXRpb24gZHJpdmVyLlxuXG4gIEV4YW1wbGUgY29tcG9uZW50OlxuXG4gIDxWaWV3IHN0eWxlPXt7IGJhY2tncm91bmRDb2xvcjogI0YwMCwgdHJhbnNmb3JtOiBbeyByb3RhdGU6ICc5MGRlZycgfV0gfX0+XG4gICAgPFRleHQ+SGVsbG8gV29ybGQ8L1RleHQ+XG4gIDwvVmlldz5cblxuICBSZXN1bHRzIGluIHRoZSBmb2xsb3dpbmcgY29tcG9uZW50IGhpZXJhcmNoeSB3aGVyZVxuICB0aGUgb3V0ZXIgdmlld3MgYXJlIGFuaW1hdGFibGUgdmlld3M6XG5cbiAgPFZpZXcgc3R5bGU9e3sgdHJhbnNmb3JtOiBbeyByb3RhdGU6ICc5MGRlZycgfV0gfX0+ICA8LS0gTmF0aXZlIEFuaW1hdGVkIENvbXBvbmVudFxuICAgIDxWaWV3IHN0eWxlPXt7IGJhY2tncm91bmRDb2xvcjogI0YwMCwgZmxleDogMSB9fSA+IDwtLSBBbmltYXRlZCBDb21wb25lbnRcbiAgICAgIDxWaWV3IHN0eWxlPXtmbGV4OiAxfT4gICAgICAgICAgICAgICAgICAgICAgICAgICA8LS0gT3JnLiBjb21wb25lbnRcbiAgICAgICAgPFRleHQ+SGVsbG8gV29ybGQ8L1RleHQ+XG4gICAgICA8L1ZpZXc+XG4gICAgPC9WaWV3PlxuICA8L1ZpZXc+XG5cbiAgUGFyYW1ldGVyczpcbiAgY29tcG9uZW50OiAgICAgIFRoZSBjb21wb25lbnQgdG8gY3JlYXRlIHdyYXBwZXIgZm9yLiBDYW4gYmUgYSByZWd1bGFyIGNsYXNzIGJhc2VkIG9yXG4gICAgICAgICAgICAgICAgICBzdGF0ZWxlc3MgY29tcG9uZW50LlxuICBuYXRpdmVTdHlsZXM6ICAgU3R5bGVzIGZvciB0aGUgbmF0aXZlIHBhcnQgb2YgdGhlIHdyYXBwZXIuIFB1dCBhbnkgbmF0aXZlIGFuaW1hdGlvbnNcbiAgICAgICAgICAgICAgICAgICh0cmFuc2Zvcm1zICYgb3BhY2l0eSkgaGVyZS4gKG9wdGlvbmFsKVxuICBvdmVycmlkZVN0eWxlczogTGFzdCBzdHlsZXMgdG8gcHV0IG9uIHRoZSBvdXRlciB3cmFwcGVyXG4gIHN0eWxlczogICAgICAgICBTdHlsZXMgZm9yIHRoZSBub24tbmF0aXZlIGFuaW1hdGlvbnMgKG9wdGlvbmFsKVxuICBuYXRpdmVDYWNoZWQ6ICAgUHJvdmlkZSBhIGNhY2hlZCBBbmltYXRlZENvbXBvbmVudCB3cmFwcGVyIGZvciB0aGUgbmF0aXZlIHBhcnQgKG9wdGlvbmFsKVxuICBjYWNoZWQ6ICAgICAgICAgUHJvdmlkZSBhIGNhY2hlZCBBbmltYXRlZENvbXBvbmVudCB3cmFwcGVyIGZvciB0aGUgbm9uLW5hdGl2ZSBwYXJ0IChvcHRpb25hbClcbiAgbG9nOiAgICAgICAgICAgIFdyaXRlcyB0byBkZWJ1ZyBvdXRwdXQgaWYgdHJ1ZS5cbiAgbG9nUHJlZml4OiAgICAgIFByZWZpeCBmb3IgdGhlIGxvZyBvdXRwdXRcbiovXG50eXBlIFBhcmFtZXRlcnMgPSB7XG4gIGNvbXBvbmVudDogYW55LFxuICBuYXRpdmVTdHlsZXM6ID9TdHlsZVNoZWV0Lk5hbWVkU3R5bGVzLFxuICBzdHlsZXM6ID9TdHlsZVNoZWV0Lk5hbWVkU3R5bGVzLFxuICBvdmVycmlkZVN0eWxlczogP1N0eWxlU2hlZXQuTmFtZWRTdHlsZXMsXG4gIG5hdGl2ZUNhY2hlZDogP2FueSxcbiAgY2FjaGVkOiA/YW55LFxuICBlcXVhbEFzcGVjdFJhdGlvOiA/Ym9vbGVhbixcbiAgaW5uZXJSZWY6ID9hbnksXG4gIGxvZzogP0Jvb2xlYW4sXG4gIGxvZ1ByZWZpeDogP3N0cmluZ1xufVxuY29uc3QgY3JlYXRlQW5pbWF0ZWRXcmFwcGVyID0gKHBhcmFtczogUGFyYW1ldGVycykgPT4ge1xuICBjb25zdCBlcXVhbEFzcGVjdFJhdGlvID0gcGFyYW1zLmVxdWFsQXNwZWN0UmF0aW8gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBwYXJhbXMuZXF1YWxBc3BlY3RSYXRpbztcblxuICAvLyBDcmVhdGUgd3JhcHBlZCB2aWV3c1xuICBjb25zdCBuYXRpdmVBbmltYXRlZENvbXBvbmVudCA9IHBhcmFtcy5uYXRpdmVDYWNoZWQgfHwgY3JlYXRlQW5pbWF0ZWQoKTtcbiAgY29uc3QgYW5pbWF0ZWRDb21wb25lbnQgPSBwYXJhbXMuY2FjaGVkIHx8IGNyZWF0ZUFuaW1hdGVkKCk7XG5cbiAgLy8gRmxhdHRlbiBzdHlsZVxuICBjb25zdCBmbGF0dGVuZWRTdHlsZSA9IFN0eWxlU2hlZXQuZmxhdHRlbihwYXJhbXMuY29tcG9uZW50LnByb3BzLnN0eWxlKTtcblxuICAvLyBHZXQgc3R5bGVzXG4gIGNvbnN0IG5hdGl2ZUFuaW1hdGVkU3R5bGVzID0gZ2V0TmF0aXZlQW5pbWF0YWJsZVN0eWxlcyhmbGF0dGVuZWRTdHlsZSk7XG4gIGNvbnN0IGFuaW1hdGVkU3R5bGVzID0gZ2V0QW5pbWF0YWJsZVN0eWxlcyhmbGF0dGVuZWRTdHlsZSk7XG4gIGNvbnN0IGNvbXBvbmVudFN0eWxlcyA9IGdldFJlc29sdmVkQXNwZWN0UmF0aW8oZXF1YWxBc3BlY3RSYXRpbywgdHJ1ZSxcbiAgICBnZXRDb21wb25lbnRTdHlsZXMoZmxhdHRlbmVkU3R5bGUpKTtcblxuICAvLyBjcmVhdGUgaW5uZXIgZWxlbWVudFxuICBjb25zdCBpbm5lckVsZW1lbnQgPSBSZWFjdC5jcmVhdGVFbGVtZW50KHBhcmFtcy5jb21wb25lbnQudHlwZSwge1xuICAgIC4uLnBhcmFtcy5jb21wb25lbnQucHJvcHMsXG4gICAgcmVmOiBwYXJhbXMuaW5uZXJSZWYsXG4gICAgc3R5bGU6IFtjb21wb25lbnRTdHlsZXMsIGdldERlYnVnQm9yZGVyKCcjRjAwJyldLFxuICB9KTtcblxuICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFuIGFic29sdXRlIHBvc2l0aW9uZWQgZWxlbWVudFxuICBjb25zdCBhZGRpdGlvbmFsQW5pbWF0ZWRTdHlsZXMgPSB7IG92ZXJmbG93OiAnaGlkZGVuJyB9O1xuXG4gIC8vIEZvciBhYnNvbHV0ZSBwb3NpdGlvbmVkIGVsZW1lbnRzIHdlIG5lZWQgdG8gc2V0IHRoZSBmbGV4IHByb3BlcnR5XG4gIC8vIHRvIGVuYWJsZSBmdWxsIGZpbGwgb2YgdGhlIGlubmVyIGVsZW1lbnQuXG4gIGlmIChuYXRpdmVBbmltYXRlZFN0eWxlc1xuICAgICYmIG5hdGl2ZUFuaW1hdGVkU3R5bGVzLnBvc2l0aW9uID09PSAnYWJzb2x1dGUnKSB7XG4gICAgYWRkaXRpb25hbEFuaW1hdGVkU3R5bGVzLmZsZXggPSAxO1xuICB9XG5cbiAgLy8gQ3JlYXRlIEFuaW1hdGVkIGVsZW1lbnRcbiAgY29uc3QgZmluYWxBbmltYXRlZFN0eWxlcyA9IFtcbiAgICBhbmltYXRlZFN0eWxlcyxcbiAgICBwYXJhbXMuc3R5bGVzLFxuICAgIGFkZGl0aW9uYWxBbmltYXRlZFN0eWxlcyxcbiAgICBnZXREZWJ1Z0JvcmRlcignIzBGMCcpLFxuICBdO1xuXG4gIGNvbnN0IGFuaW1hdGVkRWxlbWVudCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgYW5pbWF0ZWRDb21wb25lbnQsIHsgc3R5bGU6IGZpbmFsQW5pbWF0ZWRTdHlsZXMgfSxcbiAgICBpbm5lckVsZW1lbnQsXG4gICk7XG5cbiAgLy8gU2V0dXAgcHJvcHMgZm9yIHRoZSBvdXRlciB3cmFwcGVyIChhbmQgbmF0aXZlIGFuaW1hdGVkIGNvbXBvbmVudClcbiAgY29uc3QgZmluYWxOYXRpdmVBbmltYXRlZFN0eWxlcyA9IGdldFJlc29sdmVkUm90YXRpb24oXG4gICAgWy4uLmdldFN0eWxlc1dpdGhNZXJnZWRUcmFuc2Zvcm1zKFtcbiAgICAgIC4uLihwYXJhbXMubmF0aXZlU3R5bGVzID8gcGFyYW1zLm5hdGl2ZVN0eWxlcyA6IFtdKSxcbiAgICAgIG5hdGl2ZUFuaW1hdGVkU3R5bGVzLFxuICAgIF0pLFxuICAgIGdldERlYnVnQm9yZGVyKCcjMDBGJyksXG4gICAgcGFyYW1zLm92ZXJyaWRlU3R5bGVzLFxuICAgIF0sXG4gICk7XG5cbiAgbGV0IHByb3BzID0ge1xuICAgIGNvbGxhcHNhYmxlOiBmYWxzZSwgLy8gVXNlZCB0byBmaXggbWVhc3VyZSBvbiBBbmRyb2lkXG4gICAgc3R5bGU6IGdldFJlc29sdmVkQXNwZWN0UmF0aW8oZXF1YWxBc3BlY3RSYXRpbywgZmFsc2UsIGZpbmFsTmF0aXZlQW5pbWF0ZWRTdHlsZXMpLFxuICB9O1xuXG4gIC8vIENvcHkgc29tZSBrZXkgcHJvcGVydGllc1xuICBpZiAocGFyYW1zLmNvbXBvbmVudC5wcm9wcy5fX2luZGV4KSB7XG4gICAgcHJvcHMgPSB7IC4uLnByb3BzLCBpbmRleDogcGFyc2VJbnQocGFyYW1zLmNvbXBvbmVudC5wcm9wcy5fX2luZGV4LCAxMCkgfTtcbiAgfVxuICBpZiAocGFyYW1zLmNvbXBvbmVudC5rZXkpIHsgcHJvcHMgPSB7IC4uLnByb3BzLCBrZXk6IHBhcmFtcy5jb21wb25lbnQua2V5IH07IH1cbiAgaWYgKHBhcmFtcy5jb21wb25lbnQucmVmKSB7IHByb3BzID0geyAuLi5wcm9wcywgcmVmOiBwYXJhbXMuY29tcG9uZW50LnJlZiB9OyB9XG4gIGlmIChwYXJhbXMuY29tcG9uZW50Lm9uTGF5b3V0KSB7IHByb3BzID0geyAuLi5wcm9wcywgb25MYXlvdXQ6IHBhcmFtcy5jb21wb25lbnQub25MYXlvdXQgfTsgfVxuXG4gIC8vIENyZWF0ZSBuYXRpdmUgYW5pbWF0ZWQgY29tcG9uZW50XG4gIGNvbnN0IG5hdGl2ZUFuaW1hdGVkRWxlbWVudCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgbmF0aXZlQW5pbWF0ZWRDb21wb25lbnQsXG4gICAgcHJvcHMsXG4gICAgYW5pbWF0ZWRFbGVtZW50LFxuICApO1xuXG4gIC8vIGlmIChfX0RFVl9fKSB7XG4gIC8vICAgaWYocGFyYW1zLmxvZykge1xuICAvLyAgICAgY29uc3QgbG9nID0gKHBhcmFtcy5sb2dQcmVmaXggPyBwYXJhbXMubG9nUHJlZml4ICsgXCJcXG5cIiA6IFwiXCIpICtcbiAgLy8gICAgICAgXCIgIGlubmVyRWxlbWVudDogICAgICAgICAgXCIgKyBKU09OLnN0cmluZ2lmeShTdHlsZVNoZWV0LmZsYXR0ZW4oaW5uZXJFbGVtZW50LnByb3BzLnN0eWxlKSkgKyBcIlxcblwiICtcbiAgLy8gICAgICAgXCIgIGFuaW1hdGVkRWxlbWVudDogICAgICAgXCIgKyBKU09OLnN0cmluZ2lmeShTdHlsZVNoZWV0LmZsYXR0ZW4oYW5pbWF0ZWRFbGVtZW50LnByb3BzLnN0eWxlKSkgKyBcIlxcblwiICtcbiAgLy8gICAgICAgXCIgIG5hdGl2ZUFuaW1hdGVkRWxlbWVudDogXCIgKyBKU09OLnN0cmluZ2lmeShTdHlsZVNoZWV0LmZsYXR0ZW4obmF0aXZlQW5pbWF0ZWRFbGVtZW50LnByb3BzLnN0eWxlKSk7XG4gIC8vICAgICBpZihsYXN0TG9nICE9PSBsb2cpe1xuICAvLyAgICAgICBsYXN0TG9nID0gbG9nO1xuICAvLyAgICAgICBjb25zb2xlLmxvZyhcIlxcblwiICsgbG9nICsgXCJcXG5cIik7XG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgcmV0dXJuIG5hdGl2ZUFuaW1hdGVkRWxlbWVudDtcbn07XG4vLyBjb25zdCBsYXN0TG9nID0gJyc7XG5cbmNvbnN0IGNyZWF0ZUFuaW1hdGVkID0gKCkgPT4ge1xuICAvLyBDcmVhdGUgd3JhcHBlZCB2aWV3XG4gIGNvbnN0IHdyYXBwZXIgPSAoPFZpZXcgLz4pO1xuICByZXR1cm4gQW5pbWF0ZWQuY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQod3JhcHBlci50eXBlKTtcbn07XG5cbmNvbnN0IGdldERlYnVnQm9yZGVyID0gKCkgPT4gKHt9KTsgLy8gKGNvbG9yOiBzdHJpbmcpID0+ICh7IGJvcmRlcldpZHRoOiAxLCBib3JkZXJDb2xvcjogY29sb3IgfSk7XG5cbmNvbnN0IGdldFJlc29sdmVkQXNwZWN0UmF0aW8gPSAoZXF1YWxBc3BlY3RSYXRpbzogYm9vbGVhbixcbiAgYWRkRmxleDogYm9vbGVhbiwgc3R5bGU6IFN0eWxlU2hlZXQuU3R5bGUgfCBBcnJheTxTdHlsZVNoZWV0LlN0eWxlPikgPT4ge1xuICBpZiAoIXN0eWxlIHx8IGVxdWFsQXNwZWN0UmF0aW8pIHJldHVybiBzdHlsZTtcbiAgY29uc3QgcmV0VmFsID0gIShzdHlsZSBpbnN0YW5jZW9mIEFycmF5KSA/IFt7IC4uLnN0eWxlIH1dIDogc3R5bGUubWFwKHMgPT4gKHsgLi4ucyB9KSk7XG4gIHJldFZhbC5mb3JFYWNoKHIgPT4ge1xuICAgIC8vIHJlbW92ZSBoZWlnaHQvd2lkdGggYW5kIHJlcGxhY2Ugd2l0aCBmbGV4OiAxXG4gICAgZGVsZXRlIHIud2lkdGg7XG4gICAgZGVsZXRlIHIuaGVpZ2h0O1xuICB9KTtcbiAgaWYgKCFhZGRGbGV4KSByZXR1cm4gcmV0VmFsO1xuICByZXR1cm4gWy4uLnJldFZhbCwgeyBmbGV4OiAxIH1dO1xufTtcblxuY29uc3QgZ2V0UmVzb2x2ZWRSb3RhdGlvbiA9IChzdHlsZXM6IEFycmF5PFN0eWxlU2hlZXQuU3R5bGVzPikgPT4ge1xuICAvLyBpZihQbGF0Zm9ybS5PUyA9PT0gJ2lvcycpIHJldHVybiBzdHlsZXM7XG4gIGNvbnN0IHN0eWxlc0NvcHkgPSBzdHlsZXMuZmlsdGVyKGkgPT4gaSkubWFwKHMgPT4ge1xuICAgIGlmICghcykgcmV0dXJuIG51bGw7XG4gICAgaWYgKGlzTnVtYmVyKHMpKSByZXR1cm4gcztcbiAgICBjb25zdCBzYyA9IHsgLi4ucyB9O1xuICAgIGlmIChzYy50cmFuc2Zvcm0pIHtcbiAgICAgIHNjLnRyYW5zZm9ybSA9IFsuLi5zLnRyYW5zZm9ybV07XG4gICAgICBzYy50cmFuc2Zvcm0gPSBzYy50cmFuc2Zvcm0ubWFwKHQgPT4gKHsgLi4udCB9KSk7XG4gICAgfVxuICAgIHJldHVybiBzYztcbiAgfSk7XG4gIGNvbnN0IGEgPSBuZXcgQW5pbWF0ZWQuVmFsdWUoMCk7XG4gIHN0eWxlc0NvcHkuZm9yRWFjaChzdHlsZSA9PiB7XG4gICAgaWYgKHN0eWxlICYmIHN0eWxlLnRyYW5zZm9ybSkge1xuICAgICAgY29uc3QgcmkgPSBnZXRSb3RhdGlvbkZyb21TdHlsZShzdHlsZSk7XG4gICAgICBpZiAocmkucm90YXRlKSB7XG4gICAgICAgIGlmIChyaS5yb3RhdGUucm90YXRlICYmICh0eXBlb2Ygcmkucm90YXRlLnJvdGF0ZSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgc3R5bGUudHJhbnNmb3JtLmZpbmQodCA9PiBPYmplY3Qua2V5cyh0KVswXSA9PT0gJ3JvdGF0ZScpLnJvdGF0ZSA9IGEuaW50ZXJwb2xhdGUoeyBpbnB1dFJhbmdlOiBbMCwgMV0sXG4gICAgICAgICAgICBvdXRwdXRSYW5nZTogW3JpLnJvdGF0ZS5yb3RhdGUsICcwZGVnJ10gfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmkucm90YXRlLnJvdGF0ZVggJiYgKHR5cGVvZiByaS5yb3RhdGUucm90YXRlWCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgc3R5bGUudHJhbnNmb3JtLmZpbmQodCA9PiBPYmplY3Qua2V5cyh0KVswXSA9PT0gJ3JvdGF0ZVgnKS5yb3RhdGVYID0gYS5pbnRlcnBvbGF0ZSh7IGlucHV0UmFuZ2U6IFswLCAxXSxcbiAgICAgICAgICAgIG91dHB1dFJhbmdlOiBbcmkucm90YXRlWC5yb3RhdGVYLCAnMGRlZyddIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJpLnJvdGF0ZS5yb3RhdGVZICYmICh0eXBlb2Ygcmkucm90YXRlLnJvdGF0ZVkpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHN0eWxlLnRyYW5zZm9ybS5maW5kKHQgPT4gT2JqZWN0LmtleXModClbMF0gPT09ICdyb3RhdGVZJykucm90YXRlWSA9IGEuaW50ZXJwb2xhdGUoeyBpbnB1dFJhbmdlOiBbMCwgMV0sXG4gICAgICAgICAgICBvdXRwdXRSYW5nZTogW3JpLnJvdGF0ZVkucm90YXRlWSwgJzBkZWcnXSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHN0eWxlc0NvcHk7XG59O1xuXG5jb25zdCBnZXRTdHlsZXNXaXRoTWVyZ2VkVHJhbnNmb3JtcyA9IChcbiAgc3R5bGVzOiBBcnJheTxTdHlsZVNoZWV0Lk5hbWVkU3R5bGVzPixcbik6IEFycmF5PFN0eWxlU2hlZXQuTmFtZWRTdHlsZXM+ID0+IHtcbiAgY29uc3QgcmV0VmFsID0gW107XG4gIGNvbnN0IHRyYW5zZm9ybXMgPSBbXTtcbiAgaWYgKHN0eWxlcykge1xuICAgIHN0eWxlcy5mb3JFYWNoKHMgPT4ge1xuICAgICAgaWYgKHMpIHtcbiAgICAgICAgaWYgKHMudHJhbnNmb3JtKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHMudHJhbnNmb3JtO1xuICAgICAgICAgIGRlbGV0ZSBzLnRyYW5zZm9ybTtcbiAgICAgICAgICB0LmZvckVhY2godGkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0cmFuc2Zvcm1zLmZpbmQoZWwgPT4gT2JqZWN0LmtleXMoZWwpWzBdID09PSBPYmplY3Qua2V5cyh0aSlbMF0pKSB7IHRyYW5zZm9ybXMucHVzaCh0aSk7IH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXRWYWwucHVzaChzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXRWYWwucHVzaCh7IHRyYW5zZm9ybTogdHJhbnNmb3JtcyB9KTtcbiAgICByZXR1cm4gcmV0VmFsO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlcztcbn07XG5cbmNvbnN0IGdldE5hdGl2ZUFuaW1hdGFibGVTdHlsZXMgPSAoXG4gIHN0eWxlczogQXJyYXk8U3R5bGVTaGVldC5OYW1lZFN0eWxlcz58U3R5bGVTaGVldC5OYW1lZFN0eWxlcyxcbikgPT4gZ2V0RmlsdGVyZWRTdHlsZShzdHlsZXMsIChrZXkpID0+IGluY2x1ZGVQcm9wc0Zvck5hdGl2ZVN0eWxlcy5pbmRleE9mKGtleSkgPiAtMSk7XG5cbmNvbnN0IGdldEFuaW1hdGFibGVTdHlsZXMgPSAoXG4gIHN0eWxlczogQXJyYXk8U3R5bGVTaGVldC5OYW1lZFN0eWxlcz58U3R5bGVTaGVldC5OYW1lZFN0eWxlcyxcbikgPT4gZ2V0RmlsdGVyZWRTdHlsZShzdHlsZXMsIChrZXkpID0+IHZhbGlkU3R5bGVzLmluZGV4T2Yoa2V5KSA+IC0xXG4mJiBleGNsdWRlUHJvcHNGb3JTdHlsZXMuaW5kZXhPZihrZXkpID09PSAtMSk7XG5cbmNvbnN0IGdldENvbXBvbmVudFN0eWxlcyA9IChcbiAgc3R5bGVzOiBBcnJheTxTdHlsZVNoZWV0Lk5hbWVkU3R5bGVzPnxTdHlsZVNoZWV0Lk5hbWVkU3R5bGVzLFxuKSA9PiBnZXRGaWx0ZXJlZFN0eWxlKHN0eWxlcywgKGtleSkgPT4gZXhjbHVkZVByb3BzRm9yQ29tcG9uZW50LmluZGV4T2Yoa2V5KSA9PT0gLTEpO1xuXG5jb25zdCBnZXRGaWx0ZXJlZFN0eWxlID0gKFxuICBzdHlsZXM6IEFycmF5PFN0eWxlU2hlZXQuTmFtZWRTdHlsZXM+fFN0eWxlU2hlZXQuTmFtZWRTdHlsZXMsXG4gIHNob3VsZEluY2x1ZGVLZXk6IChrZXk6IFN0cmluZykgPT4gdm9pZCxcbikgPT4ge1xuICBpZiAoIXN0eWxlcykgcmV0dXJuIHN0eWxlcztcbiAgbGV0IGZsYXR0ZW5lZFN0eWxlID0gc3R5bGVzO1xuICBpZiAoIShzdHlsZXMgaW5zdGFuY2VvZiBPYmplY3QpKSB7XG4gICAgZmxhdHRlbmVkU3R5bGUgPSBTdHlsZVNoZWV0LmZsYXR0ZW4oc3R5bGVzKTtcbiAgfVxuXG4gIGlmICghZmxhdHRlbmVkU3R5bGUpIHJldHVybiBzdHlsZXM7XG4gIGlmICghKGZsYXR0ZW5lZFN0eWxlIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgZmxhdHRlbmVkU3R5bGUgPSBbZmxhdHRlbmVkU3R5bGVdO1xuICB9XG5cbiAgY29uc3QgcmV0VmFsID0ge307XG4gIGZsYXR0ZW5lZFN0eWxlLmZvckVhY2gocyA9PiB7XG4gICAgaWYgKHMpIHtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzKTtcbiAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpZiAoIWlzTnVtYmVyKGtleSkgJiYgc2hvdWxkSW5jbHVkZUtleShrZXkpKSB7XG4gICAgICAgICAgcmV0VmFsW2tleV0gPSBzW2tleV07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJldFZhbDtcbn07XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKG4pIHsgcmV0dXJuICFOdW1iZXIuaXNOYU4ocGFyc2VGbG9hdChuKSkgJiYgIU51bWJlci5pc05hTihuIC0gMCk7IH1cblxuY29uc3QgcGFkZGluZ1N0eWxlcyA9IFtcbiAgJ3BhZGRpbmcnLFxuICAncGFkZGluZ1ZlcnRpY2FsJyxcbiAgJ3BhZGRpbmdIb3Jpem9udGFsJyxcbiAgJ3BhZGRpbmdUb3AnLFxuICAncGFkZGluZ0JvdHRvbScsXG4gICdwYWRkaW5nTGVmdCcsXG4gICdwYWRkaW5nUmlnaHQnLFxuICAncGFkZGluZ1N0YXJ0JyxcbiAgJ3BhZGRpbmdFbmQnLFxuXTtcblxuY29uc3QgbWFyZ2luU3R5bGVzID3CoFtcbiAgJ21hcmdpbicsXG4gICdtYXJnaW5WZXJ0aWNhbCcsXG4gICdtYXJnaW5Ib3Jpem9udGFsJyxcbiAgJ21hcmdpblRvcCcsXG4gICdtYXJnaW5Cb3R0b20nLFxuICAnbWFyZ2luTGVmdCcsXG4gICdtYXJnaW5SaWdodCcsXG4gICdtYXJnaW5TdGFydCcsXG4gICdtYXJnaW5FbmQnLFxuXTtcblxuY29uc3QgYm9yZGVyU3R5bGVzID0gW1xuICAnYm9yZGVyQ29sb3InLFxuICAnYm9yZGVyVG9wQ29sb3InLFxuICAnYm9yZGVyUmlnaHRDb2xvcicsXG4gICdib3JkZXJCb3R0b21Db2xvcicsXG4gICdib3JkZXJMZWZ0Q29sb3InLFxuICAnYm9yZGVyU3RhcnRDb2xvcicsXG4gICdib3JkZXJFbmRDb2xvcicsXG4gICdib3JkZXJSYWRpdXMnLFxuICAnYm9yZGVyVG9wTGVmdFJhZGl1cycsXG4gICdib3JkZXJUb3BSaWdodFJhZGl1cycsXG4gICdib3JkZXJUb3BTdGFydFJhZGl1cycsXG4gICdib3JkZXJUb3BFbmRSYWRpdXMnLFxuICAnYm9yZGVyQm90dG9tTGVmdFJhZGl1cycsXG4gICdib3JkZXJCb3R0b21SaWdodFJhZGl1cycsXG4gICdib3JkZXJCb3R0b21TdGFydFJhZGl1cycsXG4gICdib3JkZXJCb3R0b21FbmRSYWRpdXMnLFxuICAnYm9yZGVyU3R5bGUnLFxuICAnYm9yZGVyV2lkdGgnLFxuICAnYm9yZGVyTGVmdFdpZHRoJyxcbiAgJ2JvcmRlclJpZ2h0V2lkdGgnLFxuICAnYm9yZGVyQm90dG9tV2lkdGgnLFxuICAnYm9yZGVyVG9wV2lkdGgnLFxuXTtcblxuY29uc3QgcG9zaXRpb25TdHlsZXMgPSBbXG4gICdzdGFydCcsXG4gICdlbmQnLFxuICAndG9wJyxcbiAgJ2xlZnQnLFxuICAncmlnaHQnLFxuICAnYm90dG9tJyxcbiAgJ21pbldpZHRoJyxcbiAgJ21heFdpZHRoJyxcbiAgJ21pbkhlaWdodCcsXG4gICdtYXhIZWlnaHQnLFxuXTtcblxuY29uc3Qgc2hhZG93U3R5bGVzID0gW1xuICAnc2hhZG93Q29sb3InLFxuICAnc2hhZG93T2Zmc2V0JyxcbiAgJ3NoYWRvd09wYWNpdHknLFxuICAnc2hhZG93UmFkaXVzJyxcbiAgJ2VsZXZhdGlvbicsXG5dO1xuXG5jb25zdCBleGNsdWRlUHJvcHNGb3JDb21wb25lbnQgPSBbXG4gIC4uLnBhZGRpbmdTdHlsZXMsXG4gIC4uLm1hcmdpblN0eWxlcyxcbiAgLi4uYm9yZGVyU3R5bGVzLFxuICAuLi5wb3NpdGlvblN0eWxlcyxcbiAgLi4uc2hhZG93U3R5bGVzLFxuICAnZGlzcGxheScsXG4gIC8vICd3aWR0aCcsXG4gIC8vICdoZWlnaHQnLFxuICAncG9zaXRpb24nLFxuICAnZmxleFdyYXAnLFxuICAvLyAnZmxleCcsXG4gICdmbGV4R3JvdycsXG4gICdmbGV4U2hyaW5rJyxcbiAgJ2ZsZXhCYXNpcycsXG4gICdhbGlnblNlbGYnLFxuICAnYXNwZWN0UmF0aW8nLFxuICAnekluZGV4JyxcbiAgJ2RpcmVjdGlvbicsXG4gICd0cmFuc2Zvcm0nLFxuICAndHJhbnNmb3JtTWF0cml4JyxcbiAgJ2RlY29tcG9zZWRNYXRyaXgnLFxuICAnc2NhbGVYJyxcbiAgJ3NjYWxlWScsXG4gICdyb3RhdGlvbicsXG4gICd0cmFuc2xhdGVYJyxcbiAgJ3RyYW5zbGF0ZVknLFxuICAnYmFja2ZhY2VWaXNpYmlsaXR5JyxcbiAgJ2JhY2tncm91bmRDb2xvcicsXG5dO1xuXG5jb25zdCBpbmNsdWRlUHJvcHNGb3JOYXRpdmVTdHlsZXMgPSBbXG4gIC4uLm1hcmdpblN0eWxlcyxcbiAgLi4ucG9zaXRpb25TdHlsZXMsXG4gIC4uLnNoYWRvd1N0eWxlcyxcbiAgJ2Rpc3BsYXknLFxuICAnd2lkdGgnLFxuICAnaGVpZ2h0JyxcbiAgJ3Bvc2l0aW9uJyxcbiAgJ2ZsZXhEaXJlY3Rpb24nLFxuICAnZmxleFdyYXAnLFxuICAnZmxleCcsXG4gICdmbGV4R3JvdycsXG4gICdmbGV4U2hyaW5rJyxcbiAgJ2ZsZXhCYXNpcycsXG4gICdhbGlnblNlbGYnLFxuICAnYXNwZWN0UmF0aW8nLFxuICAnekluZGV4JyxcbiAgJ2RpcmVjdGlvbicsXG4gICd0cmFuc2Zvcm0nLFxuXTtcblxuY29uc3QgZXhjbHVkZVByb3BzRm9yU3R5bGVzID0gW1xuICAuLi5tYXJnaW5TdHlsZXMsXG4gIC4uLnBvc2l0aW9uU3R5bGVzLFxuICAnZGlzcGxheScsXG4gIC8vIFwid2lkdGhcIixcbiAgLy8gXCJoZWlnaHRcIixcbiAgJ3Bvc2l0aW9uJyxcbiAgJ2FsaWduU2VsZicsXG4gICdhbGlnbkNvbnRlbnQnLFxuICAnb3ZlcmZsb3cnLFxuICAnZmxleEdyb3cnLFxuICAnZmxleFNocmluaycsXG4gICdmbGV4QmFzaXMnLFxuICAnYXNwZWN0UmF0aW8nLFxuICAnekluZGV4JyxcbiAgJ2RpcmVjdGlvbicsXG4gICd0cmFuc2Zvcm0nLFxuICAndHJhbnNmb3JtTWF0cml4JyxcbiAgJ2RlY29tcG9zZWRNYXRyaXgnLFxuICAnc2NhbGVYJyxcbiAgJ3NjYWxlWScsXG4gICdyb3RhdGlvbicsXG4gICd0cmFuc2xhdGVYJyxcbiAgJ3RyYW5zbGF0ZVknLFxuXTtcblxuY29uc3QgdmFsaWRTdHlsZXMgPSBbXG4gICdkaXNwbGF5JyxcbiAgJ3dpZHRoJyxcbiAgJ2hlaWdodCcsXG4gIC4uLnBvc2l0aW9uU3R5bGVzLFxuICAuLi5tYXJnaW5TdHlsZXMsXG4gIC4uLnBhZGRpbmdTdHlsZXMsXG4gIC4uLmJvcmRlclN0eWxlcyxcbiAgJ3Bvc2l0aW9uJyxcbiAgJ2ZsZXhEaXJlY3Rpb24nLFxuICAnZmxleFdyYXAnLFxuICAnanVzdGlmeUNvbnRlbnQnLFxuICAnYWxpZ25JdGVtcycsXG4gICdhbGlnblNlbGYnLFxuICAnYWxpZ25Db250ZW50JyxcbiAgJ292ZXJmbG93JyxcbiAgJ2ZsZXgnLFxuICAnZmxleEdyb3cnLFxuICAnZmxleFNocmluaycsXG4gICdmbGV4QmFzaXMnLFxuICAnYXNwZWN0UmF0aW8nLFxuICAnekluZGV4JyxcbiAgJ2RpcmVjdGlvbicsXG4gICdzaGFkb3dDb2xvcicsXG4gICdzaGFkb3dPZmZzZXQnLFxuICAnc2hhZG93T3BhY2l0eScsXG4gICdzaGFkb3dSYWRpdXMnLFxuICAndHJhbnNmb3JtJyxcbiAgJ3RyYW5zZm9ybU1hdHJpeCcsXG4gICdkZWNvbXBvc2VkTWF0cml4JyxcbiAgJ3NjYWxlWCcsXG4gICdzY2FsZVknLFxuICAncm90YXRpb24nLFxuICAndHJhbnNsYXRlWCcsXG4gICd0cmFuc2xhdGVZJyxcbiAgJ2JhY2tmYWNlVmlzaWJpbGl0eScsXG4gICdiYWNrZ3JvdW5kQ29sb3InLFxuICAnb3BhY2l0eScsXG4gICdlbGV2YXRpb24nLFxuXTtcblxuZXhwb3J0IHsgY3JlYXRlQW5pbWF0ZWRXcmFwcGVyLCBjcmVhdGVBbmltYXRlZCB9O1xuIl19