{"version":3,"sources":["createAnimatedWrapper.js"],"names":["createAnimatedWrapper","params","equalAspectRatio","undefined","nativeAnimatedComponent","nativeCached","createAnimated","animatedComponent","cached","flattenedStyle","StyleSheet","flatten","component","props","style","nativeAnimatedStyles","getNativeAnimatableStyles","animatedStyles","getAnimatableStyles","componentStyles","getResolvedAspectRatio","getComponentStyles","innerElement","React","createElement","type","ref","innerRef","getDebugBorder","additionalAnimatedStyles","overflow","position","flex","finalAnimatedStyles","styles","animatedElement","finalNativeAnimatedStyles","getResolvedRotation","getStylesWithMergedTransforms","nativeStyles","overrideStyles","collapsable","__index","index","parseInt","key","onLayout","nativeAnimatedElement","wrapper","Animated","createAnimatedComponent","addFlex","retVal","Array","map","s","forEach","r","width","height","stylesCopy","filter","i","isNumber","sc","transform","t","a","Value","ri","rotate","find","Object","keys","interpolate","inputRange","outputRange","rotateX","rotateY","transforms","ti","el","push","getFilteredStyle","includePropsForNativeStyles","indexOf","validStyles","excludePropsForStyles","excludePropsForComponent","shouldIncludeKey","n","Number","isNaN","parseFloat","paddingStyles","marginStyles","borderStyles","positionStyles","shadowStyles"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { View, Animated, StyleSheet } from 'react-native';\n\nimport { getRotationFromStyle } from './getRotationFromStyle';\nimport { mergeStyles } from './mergeStyles';\n/*\n  This HOC wrapper creates animatable wrappers around the provided component\n  to make it animatable - independent of wether it is a stateless or class\n  component.\n\n  In addition it wraps the element in two outer animatable components - one\n  for transform animations that can be used with the native driver, and one\n  for other properties that can be animated using a non-native animation driver.\n\n  Example component:\n\n  <View style={{ backgroundColor: #F00, transform: [{ rotate: '90deg' }] }}>\n    <Text>Hello World</Text>\n  </View>\n\n  Results in the following component hierarchy where\n  the outer views are animatable views:\n\n  <View style={{ transform: [{ rotate: '90deg' }] }}>  <-- Native Animated Component\n    <View style={{ backgroundColor: #F00, flex: 1 }} > <-- Animated Component\n      <View style={flex: 1}>                           <-- Org. component\n        <Text>Hello World</Text>\n      </View>\n    </View>\n  </View>\n\n  Parameters:\n  component:      The component to create wrapper for. Can be a regular class based or\n                  stateless component.\n  nativeStyles:   Styles for the native part of the wrapper. Put any native animations\n                  (transforms & opacity) here. (optional)\n  overrideStyles: Last styles to put on the outer wrapper\n  styles:         Styles for the non-native animations (optional)\n  nativeCached:   Provide a cached AnimatedComponent wrapper for the native part (optional)\n  cached:         Provide a cached AnimatedComponent wrapper for the non-native part (optional)\n  log:            Writes to debug output if true.\n  logPrefix:      Prefix for the log output\n*/\ntype Parameters = {\n  component: any,\n  nativeStyles: ?StyleSheet.NamedStyles,\n  styles: ?StyleSheet.NamedStyles,\n  overrideStyles: ?StyleSheet.NamedStyles,\n  nativeCached: ?any,\n  cached: ?any,\n  equalAspectRatio: ?boolean,\n  innerRef: ?any,\n  log: ?Boolean,\n  logPrefix: ?string\n}\nconst createAnimatedWrapper = (params: Parameters) => {\n  const equalAspectRatio = params.equalAspectRatio === undefined ? true : params.equalAspectRatio;\n\n  // Create wrapped views\n  const nativeAnimatedComponent = params.nativeCached || createAnimated();\n  const animatedComponent = params.cached || createAnimated();\n\n  // Flatten style\n  const flattenedStyle = StyleSheet.flatten(params.component.props.style);\n\n  // Get styles\n  const nativeAnimatedStyles = getNativeAnimatableStyles(flattenedStyle);\n  const animatedStyles = getAnimatableStyles(flattenedStyle);\n  const componentStyles = getResolvedAspectRatio(equalAspectRatio, true,\n    getComponentStyles(flattenedStyle));\n\n  // create inner element\n  const innerElement = React.createElement(params.component.type, {\n    ...params.component.props,\n    ref: params.innerRef,\n    style: [componentStyles, getDebugBorder('#F00')],\n  });\n\n  // Check if we have an absolute positioned element\n  const additionalAnimatedStyles = { overflow: 'hidden' };\n\n  // For absolute positioned elements we need to set the flex property\n  // to enable full fill of the inner element.\n  if (nativeAnimatedStyles\n    && nativeAnimatedStyles.position === 'absolute') {\n    additionalAnimatedStyles.flex = 1;\n  }\n\n  // Create Animated element\n  const finalAnimatedStyles = [\n    animatedStyles,\n    params.styles,\n    additionalAnimatedStyles,\n    getDebugBorder('#0F0'),\n  ];\n\n  const animatedElement = React.createElement(\n    animatedComponent, { style: finalAnimatedStyles },\n    innerElement,\n  );\n\n  // Setup props for the outer wrapper (and native animated component)\n  const finalNativeAnimatedStyles = getResolvedRotation(\n    [...getStylesWithMergedTransforms([\n      ...(params.nativeStyles ? params.nativeStyles : []),\n      nativeAnimatedStyles,\n    ]),\n    getDebugBorder('#00F'),\n    params.overrideStyles,\n    ],\n  );\n\n  let props = {\n    collapsable: false, // Used to fix measure on Android\n    style: getResolvedAspectRatio(equalAspectRatio, false, finalNativeAnimatedStyles),\n  };\n\n  // Copy some key properties\n  if (params.component.props.__index) {\n    props = { ...props, index: parseInt(params.component.props.__index, 10) };\n  }\n  if (params.component.key) { props = { ...props, key: params.component.key }; }\n  if (params.component.ref) { props = { ...props, ref: params.component.ref }; }\n  if (params.component.onLayout) { props = { ...props, onLayout: params.component.onLayout }; }\n\n  // Create native animated component\n  const nativeAnimatedElement = React.createElement(\n    nativeAnimatedComponent,\n    props,\n    animatedElement,\n  );\n\n  // if (__DEV__) {\n  //   if(params.log) {\n  //     const log = (params.logPrefix ? params.logPrefix + \"\\n\" : \"\") +\n  //       \"  innerElement:          \" + JSON.stringify(StyleSheet.flatten(innerElement.props.style)) + \"\\n\" +\n  //       \"  animatedElement:       \" + JSON.stringify(StyleSheet.flatten(animatedElement.props.style)) + \"\\n\" +\n  //       \"  nativeAnimatedElement: \" + JSON.stringify(StyleSheet.flatten(nativeAnimatedElement.props.style));\n  //     if(lastLog !== log){\n  //       lastLog = log;\n  //       console.log(\"\\n\" + log + \"\\n\");\n  //     }\n  //   }\n  // }\n\n  return nativeAnimatedElement;\n};\n// const lastLog = '';\n\nconst createAnimated = () => {\n  // Create wrapped view\n  const wrapper = (<View />);\n  return Animated.createAnimatedComponent(wrapper.type);\n};\n\nconst getDebugBorder = () => ({}); // (color: string) => ({ borderWidth: 1, borderColor: color });\n\nconst getResolvedAspectRatio = (equalAspectRatio: boolean,\n  addFlex: boolean, style: StyleSheet.Style | Array<StyleSheet.Style>) => {\n  if (!style || equalAspectRatio) return style;\n  const retVal = !(style instanceof Array) ? [{ ...style }] : style.map(s => ({ ...s }));\n  retVal.forEach(r => {\n    // remove height/width and replace with flex: 1\n    delete r.width;\n    delete r.height;\n  });\n  if (!addFlex) return retVal;\n  return [...retVal, { flex: 1 }];\n};\n\nconst getResolvedRotation = (styles: Array<StyleSheet.Styles>) => {\n  // if(Platform.OS === 'ios') return styles;\n  const stylesCopy = styles.filter(i => i).map(s => {\n    if (!s) return null;\n    if (isNumber(s)) return s;\n    const sc = { ...s };\n    if (sc.transform) {\n      sc.transform = [...s.transform];\n      sc.transform = sc.transform.map(t => ({ ...t }));\n    }\n    return sc;\n  });\n  const a = new Animated.Value(0);\n  stylesCopy.forEach(style => {\n    if (style && style.transform) {\n      const ri = getRotationFromStyle(style);\n      if (ri.rotate) {\n        if (ri.rotate.rotate && (typeof ri.rotate.rotate) === 'string') {\n          style.transform.find(t => Object.keys(t)[0] === 'rotate').rotate = a.interpolate({ inputRange: [0, 1],\n            outputRange: [ri.rotate.rotate, '0deg'] });\n        }\n\n        if (ri.rotate.rotateX && (typeof ri.rotate.rotateX) === 'string') {\n          style.transform.find(t => Object.keys(t)[0] === 'rotateX').rotateX = a.interpolate({ inputRange: [0, 1],\n            outputRange: [ri.rotateX.rotateX, '0deg'] });\n        }\n\n        if (ri.rotate.rotateY && (typeof ri.rotate.rotateY) === 'string') {\n          style.transform.find(t => Object.keys(t)[0] === 'rotateY').rotateY = a.interpolate({ inputRange: [0, 1],\n            outputRange: [ri.rotateY.rotateY, '0deg'] });\n        }\n      }\n    }\n  });\n\n  return stylesCopy;\n};\n\nconst getStylesWithMergedTransforms = (\n  styles: Array<StyleSheet.NamedStyles>,\n): Array<StyleSheet.NamedStyles> => {\n  const retVal = [];\n  const transforms = [];\n  if (styles) {\n    styles.forEach(s => {\n      if (s) {\n        if (s.transform) {\n          const t = s.transform;\n          delete s.transform;\n          t.forEach(ti => {\n            if (!transforms.find(el => Object.keys(el)[0] === Object.keys(ti)[0])) { transforms.push(ti); }\n          });\n        }\n        retVal.push(s);\n      }\n    });\n    retVal.push({ transform: transforms });\n    return retVal;\n  }\n\n  return styles;\n};\n\nconst getNativeAnimatableStyles = (\n  styles: Array<StyleSheet.NamedStyles>|StyleSheet.NamedStyles,\n) => getFilteredStyle(styles, (key) => includePropsForNativeStyles.indexOf(key) > -1);\n\nconst getAnimatableStyles = (\n  styles: Array<StyleSheet.NamedStyles>|StyleSheet.NamedStyles,\n) => getFilteredStyle(styles, (key) => validStyles.indexOf(key) > -1\n&& excludePropsForStyles.indexOf(key) === -1);\n\nconst getComponentStyles = (\n  styles: Array<StyleSheet.NamedStyles>|StyleSheet.NamedStyles,\n) => getFilteredStyle(styles, (key) => excludePropsForComponent.indexOf(key) === -1);\n\nconst getFilteredStyle = (\n  styles: Array<StyleSheet.NamedStyles>|StyleSheet.NamedStyles,\n  shouldIncludeKey: (key: String) => void,\n) => {\n  if (!styles) return styles;\n  let flattenedStyle = styles;\n  if (!(styles instanceof Object)) {\n    flattenedStyle = StyleSheet.flatten(styles);\n  }\n\n  if (!flattenedStyle) return styles;\n  if (!(flattenedStyle instanceof Array)) {\n    flattenedStyle = [flattenedStyle];\n  }\n\n  const retVal = {};\n  flattenedStyle.forEach(s => {\n    if (s) {\n      const keys = Object.keys(s);\n      keys.forEach(key => {\n        if (!isNumber(key) && shouldIncludeKey(key)) {\n          retVal[key] = s[key];\n        }\n      });\n    }\n  });\n\n  return retVal;\n};\n\nfunction isNumber(n) { return !Number.isNaN(parseFloat(n)) && !Number.isNaN(n - 0); }\n\nconst paddingStyles = [\n  'padding',\n  'paddingVertical',\n  'paddingHorizontal',\n  'paddingTop',\n  'paddingBottom',\n  'paddingLeft',\n  'paddingRight',\n  'paddingStart',\n  'paddingEnd',\n];\n\nconst marginStyles = [\n  'margin',\n  'marginVertical',\n  'marginHorizontal',\n  'marginTop',\n  'marginBottom',\n  'marginLeft',\n  'marginRight',\n  'marginStart',\n  'marginEnd',\n];\n\nconst borderStyles = [\n  'borderColor',\n  'borderTopColor',\n  'borderRightColor',\n  'borderBottomColor',\n  'borderLeftColor',\n  'borderStartColor',\n  'borderEndColor',\n  'borderRadius',\n  'borderTopLeftRadius',\n  'borderTopRightRadius',\n  'borderTopStartRadius',\n  'borderTopEndRadius',\n  'borderBottomLeftRadius',\n  'borderBottomRightRadius',\n  'borderBottomStartRadius',\n  'borderBottomEndRadius',\n  'borderStyle',\n  'borderWidth',\n  'borderLeftWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderTopWidth',\n];\n\nconst positionStyles = [\n  'start',\n  'end',\n  'top',\n  'left',\n  'right',\n  'bottom',\n  'minWidth',\n  'maxWidth',\n  'minHeight',\n  'maxHeight',\n];\n\nconst shadowStyles = [\n  'shadowColor',\n  'shadowOffset',\n  'shadowOpacity',\n  'shadowRadius',\n  'elevation',\n];\n\nconst excludePropsForComponent = [\n  ...paddingStyles,\n  ...marginStyles,\n  ...borderStyles,\n  ...positionStyles,\n  ...shadowStyles,\n  'display',\n  // 'width',\n  // 'height',\n  'position',\n  'flexWrap',\n  // 'flex',\n  'flexGrow',\n  'flexShrink',\n  'flexBasis',\n  'alignSelf',\n  'aspectRatio',\n  'zIndex',\n  'direction',\n  'transform',\n  'transformMatrix',\n  'decomposedMatrix',\n  'scaleX',\n  'scaleY',\n  'rotation',\n  'translateX',\n  'translateY',\n  'backfaceVisibility',\n  'backgroundColor',\n];\n\nconst includePropsForNativeStyles = [\n  ...marginStyles,\n  ...positionStyles,\n  ...shadowStyles,\n  'display',\n  'width',\n  'height',\n  'position',\n  'flexDirection',\n  'flexWrap',\n  'flex',\n  'flexGrow',\n  'flexShrink',\n  'flexBasis',\n  'alignSelf',\n  'aspectRatio',\n  'zIndex',\n  'direction',\n  'transform',\n];\n\nconst excludePropsForStyles = [\n  ...marginStyles,\n  ...positionStyles,\n  'display',\n  // \"width\",\n  // \"height\",\n  'position',\n  'alignSelf',\n  'alignContent',\n  'overflow',\n  'flexGrow',\n  'flexShrink',\n  'flexBasis',\n  'aspectRatio',\n  'zIndex',\n  'direction',\n  'transform',\n  'transformMatrix',\n  'decomposedMatrix',\n  'scaleX',\n  'scaleY',\n  'rotation',\n  'translateX',\n  'translateY',\n];\n\nconst validStyles = [\n  'display',\n  'width',\n  'height',\n  ...positionStyles,\n  ...marginStyles,\n  ...paddingStyles,\n  ...borderStyles,\n  'position',\n  'flexDirection',\n  'flexWrap',\n  'justifyContent',\n  'alignItems',\n  'alignSelf',\n  'alignContent',\n  'overflow',\n  'flex',\n  'flexGrow',\n  'flexShrink',\n  'flexBasis',\n  'aspectRatio',\n  'zIndex',\n  'direction',\n  'shadowColor',\n  'shadowOffset',\n  'shadowOpacity',\n  'shadowRadius',\n  'transform',\n  'transformMatrix',\n  'decomposedMatrix',\n  'scaleX',\n  'scaleY',\n  'rotation',\n  'translateX',\n  'translateY',\n  'backfaceVisibility',\n  'backgroundColor',\n  'opacity',\n  'elevation',\n];\n\nexport { createAnimatedWrapper, createAnimated };\n"]}