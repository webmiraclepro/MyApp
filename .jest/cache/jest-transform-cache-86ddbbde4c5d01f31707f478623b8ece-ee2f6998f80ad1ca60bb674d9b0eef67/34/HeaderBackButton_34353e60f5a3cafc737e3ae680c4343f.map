{"version":3,"sources":["HeaderBackButton.tsx"],"names":["HeaderBackButton","React","PureComponent","defaultProps","pressColorAndroid","tintColor","Platform","ios","web","truncatedTitle","backImage","BackButtonWeb","state","handleTextLayout","initialTextWidth","e","backTitleVisible","title","BackImage","styles","defaultBackImage","getTitleText","width","allowFontScaling","titleStyle","backTitleText","color","onPress","disabled","button","StyleSheet","opacity","androidButtonWrapper","margin","backgroundColor","marginLeft","default","container","alignItems","flexDirection","fontSize","paddingRight","icon","height","marginRight","marginVertical","resizeMode","transform","scaleX","I18nManager","iconWithTitle"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  I18nManager,\n  Image,\n  Text,\n  View,\n  Platform,\n  StyleSheet,\n  LayoutChangeEvent,\n} from 'react-native';\n\nimport TouchableItem from '../TouchableItem';\n\nimport defaultBackImage from '../assets/back-icon.png';\nimport BackButtonWeb from './BackButtonWeb';\nimport { HeaderBackbuttonProps } from '../../types';\n\ntype State = {\n  initialTextWidth?: number;\n};\n\nclass HeaderBackButton extends React.PureComponent<\n  HeaderBackbuttonProps,\n  State\n> {\n  static defaultProps = {\n    pressColorAndroid: 'rgba(0, 0, 0, .32)',\n    tintColor: Platform.select({\n      ios: '#037aff',\n      web: '#5f6368',\n    }),\n    truncatedTitle: 'Back',\n    backImage: Platform.select({\n      web: BackButtonWeb,\n    }),\n  };\n\n  state: State = {};\n\n  private handleTextLayout = (e: LayoutChangeEvent) => {\n    if (this.state.initialTextWidth) {\n      return;\n    }\n    this.setState({\n      initialTextWidth: e.nativeEvent.layout.x + e.nativeEvent.layout.width,\n    });\n  };\n\n  private renderBackImage() {\n    const { backImage, backTitleVisible, tintColor } = this.props;\n\n    let title = this.getTitleText();\n\n    if (React.isValidElement(backImage)) {\n      return backImage;\n    } else if (backImage) {\n      const BackImage = backImage;\n\n      return <BackImage tintColor={tintColor} title={title} />;\n    } else {\n      return (\n        <Image\n          style={[\n            styles.icon,\n            !!backTitleVisible && styles.iconWithTitle,\n            !!tintColor && { tintColor },\n          ]}\n          source={defaultBackImage}\n          fadeDuration={0}\n        />\n      );\n    }\n  }\n\n  private getTitleText = () => {\n    const { width, title, truncatedTitle } = this.props;\n\n    let { initialTextWidth } = this.state;\n\n    if (title === null) {\n      return null;\n    } else if (!title) {\n      return truncatedTitle;\n    } else if (initialTextWidth && width && initialTextWidth > width) {\n      return truncatedTitle;\n    } else {\n      return title;\n    }\n  };\n\n  private maybeRenderTitle() {\n    const {\n      allowFontScaling,\n      backTitleVisible,\n      titleStyle,\n      tintColor,\n    } = this.props;\n    let backTitleText = this.getTitleText();\n\n    if (!backTitleVisible || backTitleText === null) {\n      return null;\n    }\n\n    return (\n      <Text\n        accessible={false}\n        onLayout={this.handleTextLayout}\n        style={[styles.title, !!tintColor && { color: tintColor }, titleStyle]}\n        numberOfLines={1}\n        allowFontScaling={!!allowFontScaling}\n      >\n        {this.getTitleText()}\n      </Text>\n    );\n  }\n\n  render() {\n    const { onPress, pressColorAndroid, title, disabled } = this.props;\n\n    let button = (\n      <TouchableItem\n        disabled={disabled}\n        accessible\n        accessibilityRole=\"button\"\n        accessibilityComponentType=\"button\"\n        accessibilityLabel={title ? `${title}, back` : 'Go back'}\n        accessibilityTraits=\"button\"\n        testID=\"header-back\"\n        delayPressIn={0}\n        onPress={disabled ? undefined : onPress}\n        pressColor={pressColorAndroid}\n        style={[styles.container, disabled && styles.disabled]}\n        borderless\n      >\n        <View style={styles.container}>\n          {this.renderBackImage()}\n          {this.maybeRenderTitle()}\n        </View>\n      </TouchableItem>\n    );\n\n    if (Platform.OS === 'ios') {\n      return button;\n    } else {\n      return <View style={styles.androidButtonWrapper}>{button}</View>;\n    }\n  }\n}\n\nconst styles = StyleSheet.create({\n  disabled: {\n    opacity: 0.5,\n  },\n  androidButtonWrapper: {\n    margin: 13,\n    backgroundColor: 'transparent',\n    ...Platform.select({\n      web: {\n        marginLeft: 21,\n      },\n      default: {},\n    }),\n  },\n  container: {\n    alignItems: 'center',\n    flexDirection: 'row',\n    backgroundColor: 'transparent',\n  },\n  title: {\n    fontSize: 17,\n    paddingRight: 10,\n  },\n  icon: Platform.select({\n    ios: {\n      backgroundColor: 'transparent',\n      height: 21,\n      width: 13,\n      marginLeft: 9,\n      marginRight: 22,\n      marginVertical: 12,\n      resizeMode: 'contain',\n      transform: [{ scaleX: I18nManager.isRTL ? -1 : 1 }],\n    },\n    default: {\n      height: 24,\n      width: 24,\n      margin: 3,\n      resizeMode: 'contain',\n      backgroundColor: 'transparent',\n      transform: [{ scaleX: I18nManager.isRTL ? -1 : 1 }],\n    },\n  }),\n  iconWithTitle:\n    Platform.OS === 'ios'\n      ? {\n          marginRight: 6,\n        }\n      : {},\n});\n\nexport default HeaderBackButton;\n"]}