{"version":3,"sources":["NativeSafeComponent.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_templateObject","_taggedTemplateLiteral","_templateObject2","_templateObject3","_reactNative","require","_dedent","_dedent2","_interopRequireDefault","_SafeModule","_SafeModule2","obj","__esModule","default","strings","raw","freeze","defineProperties","value","first","array","fn","result","moduleWithName","nameOrArray","Array","isArray","UIManager","findFirstResolver","namespace","findFirstOnNamespace","findFirstViewName","getPrimaryName","defaultGetVersion","module","VERSION","SafeComponentCreate","options","Error","viewName","propOverrides","componentOverrides","mockComponent","mock","getVersion","PRIMARY_VIEW_NAME","realViewName","realViewConfig","moduleOptions","moduleName","nativeModule","version","Constants","overrides","boundOverrides","NativeProps","nativeComponent","requireNativeComponent","runCommand","instance","name","_len","args","_key","Platform","select","android","dispatchViewManagerCommand","findNodeHandle","Commands","ios","apply","concat","_default","updateView","props","native","_overrides","__DEV__","console","error","exports"],"mappings":"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","sourcesContent":["var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _templateObject=_taggedTemplateLiteral(['\\n      SafeModule.create(...) was invoked without any options parameter.\\n    '],['\\n      SafeModule.create(...) was invoked without any options parameter.\\n    ']),_templateObject2=_taggedTemplateLiteral(['\\n             When attempting to resolve the native component ',',\\n             componentOverrides.',' is expected to be a function, but found\\n             ',' instead.\\n          '],['\\n             When attempting to resolve the native component ',',\\n             componentOverrides.',' is expected to be a function, but found\\n             ',' instead.\\n          ']),_templateObject3=_taggedTemplateLiteral(['\\n            When attempting to resolve the native component ',',\\n            componentOverrides.',' is expected to be a function that returns a React\\n            component. Instead, ',' was found.\\n          '],['\\n            When attempting to resolve the native component ',',\\n            componentOverrides.',' is expected to be a function that returns a React\\n            component. Instead, ',' was found.\\n          ']);var _reactNative=require('react-native');\n\n\n\n\n\nvar _dedent=require('dedent');var _dedent2=_interopRequireDefault(_dedent);\nvar _SafeModule=require('./SafeModule');var _SafeModule2=_interopRequireDefault(_SafeModule);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}));}\n\nvar first=function first(array,fn){\nvar result=void 0;\nvar i=0;\n/* eslint no-plusplus: 0 */\nfor(;i<array.length;i++){\nresult=fn(array[i]);\nif(result)return result;\n}\nreturn null;\n};\n\nvar moduleWithName=function moduleWithName(nameOrArray){\nif(!nameOrArray)return null;\nif(Array.isArray(nameOrArray))return first(nameOrArray,moduleWithName);\nreturn _reactNative.UIManager[nameOrArray];\n};\n\nvar findFirstResolver=function findFirstResolver(namespace){return function findFirstOnNamespace(nameOrArray){\nif(!nameOrArray)return null;\nif(Array.isArray(nameOrArray))return first(nameOrArray,findFirstOnNamespace);\nreturn nameOrArray in namespace?nameOrArray:null;\n};};\n\nvar findFirstViewName=findFirstResolver(_reactNative.UIManager);\n\nvar getPrimaryName=function getPrimaryName(nameOrArray){\nreturn Array.isArray(nameOrArray)?getPrimaryName(nameOrArray[0]):nameOrArray;\n};\n\nvar defaultGetVersion=function defaultGetVersion(module){return module.VERSION;};\n\nfunction SafeComponentCreate(options){\nif(!options){\nthrow new Error((0,_dedent2.default)(_templateObject));\n\n\n}var\n\nviewName=\n\n\n\n\noptions.viewName;var propOverrides=options.propOverrides;var componentOverrides=options.componentOverrides;var mockComponent=options.mockComponent;var mock=options.mock;var\n\ngetVersion=\noptions.getVersion;\n\nif(!getVersion){\ngetVersion=defaultGetVersion;\n}\n\nif(!viewName){\nthrow new Error('\\n      SafeModule.component(...) requires a viewName property to be specified.\\n    ');\n\n\n}\n\nif(!mockComponent){\nthrow new Error('\\n      SafeModule.component(...) requires a mockComponent property to be specified.\\n    ');\n\n\n}\n\nvar PRIMARY_VIEW_NAME=getPrimaryName(viewName);\n\nvar realViewName=findFirstViewName(viewName);\nvar realViewConfig=_reactNative.UIManager[realViewName];\n\nif(!realViewName||!realViewConfig){\nreturn mockComponent;\n}\n\nvar moduleOptions=_extends({},options,{\nmock:mock||{},\nmoduleName:realViewName+'Manager'});\n\n\nvar nativeModule=(0,_SafeModule2.default)(moduleOptions);\n\nvar version=getVersion(realViewConfig.Constants||{});\n\nif(propOverrides){\nvar overrides=propOverrides[version];\nvar boundOverrides={};\nif(overrides){\nif(typeof overrides==='function'){\nboundOverrides=overrides(realViewConfig.NativeProps,realViewConfig,nativeModule);\n}else{\nboundOverrides=_extends({},overrides);\n}\n}\n_extends(realViewConfig.NativeProps,boundOverrides);\n}\n\nvar nativeComponent=(0,_reactNative.requireNativeComponent)(realViewName);\n\nvar result=nativeComponent;\n\nresult.runCommand=function(instance,name){for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key];}\nreturn _reactNative.Platform.select({\nandroid:function android(){return _reactNative.UIManager.dispatchViewManagerCommand(\n(0,_reactNative.findNodeHandle)(instance),\n_reactNative.UIManager[realViewName].Commands[name],\nargs);},\n\nios:function ios(){return nativeModule[name].apply(nativeModule,[(0,_reactNative.findNodeHandle)(instance)].concat(args));},\ndefault:function _default(){}})();\n\n};\n\nresult.updateView=function(instance,props){\nvar native=function native(){return _reactNative.UIManager.updateView((0,_reactNative.findNodeHandle)(instance),realViewName,props);};\n_reactNative.Platform.select({\nios:native,\nandroid:native,\ndefault:function _default(){}})();\n\n};\n\nif(componentOverrides){\nvar _overrides=componentOverrides[version];\nif(_overrides){\nif(__DEV__){\nif(typeof _overrides!=='function'){\nconsole.error((0,_dedent2.default)(_templateObject2,\nPRIMARY_VIEW_NAME,\nversion,\ntypeof _overrides));\n\n}\n}\n\nresult=_overrides(nativeComponent,nativeModule);\n\nif(__DEV__){\nif(typeof result!=='function'){\nconsole.error((0,_dedent2.default)(_templateObject3,\nPRIMARY_VIEW_NAME,\nversion,\ntypeof result));\n\n}\n}\n}\n}\n\nreturn result;\n}\n\nmodule.exports=SafeComponentCreate;"]}